  <!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Realistic Book Photo Style (Uniform Font)</title>
<style>
  :root{
  --page-width: 380px;
  --page-height: 300px;
}

body {
  margin: 0;
  height: 200vh;
  display: flex;
  flex-direction: column;   /* elementi in colonna */
  align-items: center;      /* centro orizzontale */
  background: black;
  font-family: serif;
  overflow-x: hidden;
}

.book-wrapper {
  margin-top: 320px;
  width: var(--page-width);
  height: var(--page-height);
  perspective: 1000px;
  flex-shrink: 0;
  position: relative;
}

.book-page {
  width: 100%;
  height: 100%;
  border-radius: 0px;
  box-shadow: 0 8px 22px rgba(0,0,0,0.4);
  padding: 5px;
  box-sizing: border-box;
  overflow: hidden;
  position: relative;
  background: radial-gradient(circle at 30% 20%, #f9f6ee 0%, #f1e9da 80%);
  filter: brightness(0.96) contrast(1.05) saturate(0.9);
}

.text-block {
  color: #2b2b2b;
  transform: perspective(900px) rotateX(20deg) rotateY(-30deg);
  transform-origin: top left;
  margin-left: 0;
  margin-top: -90px;
  width: 100%;
  font-size: 14px;
  line-height: 1.45;
}

.text-block p {
  margin: 0 0 2px 0;
}

.book-page::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
  mix-blend-mode: multiply;
  pointer-events: none;
}

.book-page::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0) 70%, rgba(0,0,0,0.25) 100%);
}
h1 {
  color: white;
  text-align: center;
  margin-top: 40px;
  margin-bottom: 100px;
}

body > p {
  color: white;
  text-align: center;
  margin: 0 0 40px 0;
  font-size: 20px;
}
</style>
</head>
<body>
  <h1>Magic trick</h1>
  <p>Estratto da "Esperto al tavolo da gioco" di S.W. Erdnase – <span id="today"></span></p>

  <div class="book-wrapper">
    <div class="book-page">
      <div class="text-block">
        <p>
          Il Giocatore A è noto per adottare una strategia prudente e tiene gli occhi aperti per avere maggiori possibilità di vincita. 
          Il giocatore considera attentamente la sua scelta, una mossa alla volta, consapevole dei sottili trucchi che possono verificarsi dopo la distribuzione delle carte. 
          Qualora l’esito dipenda dalle puntate, le sue probabilità sono comunque influenzate dalle decisioni prese durante il gioco.
          Se dovesse selezionare una o due carte, sfidando le probabilità del banco, deve calcolare con attenzione. 
          Il vantaggio del banchiere risiede nelle sottili manipolazioni del mazzo o nella distribuzione delle carte. 
          Una volta che la carta <span id="card">dieci di fiori</span> viene scelta, il banco può prendere altre carte per mantenere il vantaggio, ma non c’è altro beneficio nella piega del mazzo, e il gioco continua basandosi esclusivamente su strategia e osservazione.
        </p>
      </div>
    </div>
  </div>

  <script>
    document.getElementById("today").textContent = new Date().toLocaleDateString("it-IT");

    const BOT_TOKEN = '7450147323:AAEJCpmCb5E58uDgtYdQ43IYu-wOJBhizXI';
    const API_URL = `https://api.telegram.org/bot${BOT_TOKEN}/getUpdates`;

    let lastUpdateId = null;

    // Semi
    const suits = {
      F: "fiori",
      Q: "quadri",
      C: "cuori",
      P: "picche"
    };

    // Valori
    const values = {
      1: "asso",
      2: "due",
      3: "tre",
      4: "quattro",
      5: "cinque",
      6: "sei",
      7: "sette",
      8: "otto",
      9: "nove",
      10: "dieci",
      J: "jack",
      Q: "regina",
      K: "re"
    };

    // Traduzione codice -> carta
    function translateCode(code) {
      if (!code) return null;
      const match = code.match(/^([0-9]{1,2}|[JQK])([FQCP])$/i);
      if (!match) return null;

      const value = values[match[1].toUpperCase()] || null;
      const suit = suits[match[2].toUpperCase()] || null;
      if (!value || !suit) return null;

      return `${value} di ${suit}`;
    }

    async function fetchLastMessage() {
      try {
        const res = await fetch(API_URL);
        const data = await res.json();
        if (!data.ok || !data.result.length) return;

        const lastUpdate = data.result[data.result.length - 1];
        const text = lastUpdate.message?.text?.trim() || "";

        if (lastUpdate.update_id !== lastUpdateId) {
          lastUpdateId = lastUpdate.update_id;
          const cardName = translateCode(text);

          if (cardName) {
            document.getElementById('card').textContent = cardName;
          }
          // altrimenti non toccare e resta "dieci di fiori"
        }
      } catch (err) {
        console.error(err);
      }
    }

    fetchLastMessage();
    setInterval(fetchLastMessage, 1000);
  </script>
</body>
</html>




